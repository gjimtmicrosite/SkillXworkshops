<!DOCTYPE html>
<html>
<head>
<title>SkillX Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Poppins,Arial;
  background:#f4f6fb;
}
.container{
  display:flex;
}
.sidebar{
  width:240px;
  background:#6a1b9a;
  color:#fff;
  min-height:100vh;
  padding:20px;
}
.sidebar h2{
  text-align:center;
}
.sidebar button{
  width:100%;
  margin:10px 0;
  padding:12px;
  border:none;
  background:#8e24aa;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
}
.sidebar button:disabled{
  background:#aaa;
  cursor:not-allowed;
}
.main{
  flex:1;
  padding:30px;
}
.card{
  background:#fff;
  padding:25px;
  border-radius:12px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}
.day-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:15px;
  margin-top:20px;
}
.day{
  padding:15px;
  text-align:center;
  background:#ede7f6;
  border-radius:10px;
  cursor:pointer;
}
.day.locked{
  background:#ccc;
  cursor:not-allowed;
}
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.5);
  display:none;
  align-items:center;
  justify-content:center;
}
.popup-content{
  background:#fff;
  padding:25px;
  border-radius:10px;
  width:300px;
  text-align:center;
}
.popup-content button{
  width:100%;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="container">

  <div class="sidebar">
    <h2>ðŸŽ“ SkillX</h2>
    <button onclick="logout()">Logout</button>
  </div>

  <div class="main">
    <div class="card">
      <h2>Welcome <span id="studentName"></span></h2>
<p>Workshop: <b><span id="workshopName"></span></b></p>


      <h3>Day-wise Quiz</h3>
      <div class="day-grid" id="days"></div>
    </div>
  </div>

</div>

<!-- LEVEL POPUP -->
<div class="popup" id="popup">
  <div class="popup-content">
    <h3>Select Level</h3>
    <button onclick="startQuiz('simple')">Simple</button>
    <button onclick="startQuiz('moderate')">Moderate</button>
    <button onclick="startQuiz('expert')">Expert</button>
    <button onclick="closePopup()">Cancel</button>
  </div>
</div>

<script>
const student = JSON.parse(localStorage.getItem("student"));
if(!student) location.href="login.html";

document.getElementById("studentName").innerText = student.name;
document.getElementById("workshopName").innerText = student.workshop;

// PROGRESS TRACKER
let progress = JSON.parse(localStorage.getItem("quizProgress")) || {
  day:1,
  completed:{}
};

const daysDiv = document.getElementById("days");

function renderDays(){
  daysDiv.innerHTML="";
  for(let d=1; d<=5; d++){
    const div = document.createElement("div");
    div.className = "day " + (d>progress.day ? "locked":"");
    div.innerText = "Day " + d;
    if(d<=progress.day){
      div.onclick = ()=>openPopup(d);
    }
    daysDiv.appendChild(div);
  }
}
renderDays();

let selectedDay = null;

function openPopup(day){
  selectedDay = day;
  document.getElementById("popup").style.display="flex";
}

function closePopup(){
  document.getElementById("popup").style.display="none";
}

function startQuiz(level){
  closePopup();

  // SAVE CURRENT ATTEMPT
  localStorage.setItem("currentQuiz", JSON.stringify({
    day:selectedDay,
    level,
    workshop:student.workshop
  }));

  // GO TO QUIZ PAGE
  window.location.href="quiz.html";
}

function logout(){
  localStorage.clear();
  location.href="login.html";
}
</script>

</body>
</html>
