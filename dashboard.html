<!DOCTYPE html>
<html>
<head>
<title>SkillX Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Poppins;background:#f4f6fb;display:flex;height:100vh}
.sidebar{width:250px;background:#5a189a;color:#fff;padding:20px}
.sidebar button{width:100%;margin:8px 0;padding:10px;border:none;background:#7b2cbf;color:#fff;border-radius:6px;cursor:pointer}
.main{flex:1;padding:30px;overflow:auto}
.card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 10px 25px rgba(0,0,0,.1);margin-bottom:20px}
.hidden{display:none}
</style>
</head>

<body>

<div class="sidebar">
  <h3>ðŸŽ“ SkillX</h3>
  <button onclick="startQuiz('simple')">Simple Quiz</button>
  <button onclick="startQuiz('moderate')">Moderate Quiz</button>
  <button onclick="startQuiz('difficult')">Difficult Quiz</button>
  <button onclick="logout()">Logout</button>
</div>

<div class="main">

<div class="card">
  <h2>Welcome <span id="name"></span></h2>
  <p>Workshop: <b id="workshop"></b></p>
</div>

<div id="quiz" class="card hidden">
  <h3 id="quizTitle"></h3>
  <div id="questionBox"></div>
  <button onclick="nextQuestion()">Next</button>
  <p id="progress"></p>
</div>

<div id="result" class="card hidden"></div>

</div>

<script>
const student = JSON.parse(localStorage.getItem("student"));
if(!student) location.href="login.html";

document.getElementById("name").innerText = student.name;
document.getElementById("workshop").innerText = student.singleWorkshop;

const WEB_APP_URL = "PASTE_YOUR_WEB_APP_URL";

let questions=[], index=0, score=0;

function startQuiz(level){
  document.getElementById("quiz").classList.remove("hidden");
  document.getElementById("result").classList.add("hidden");
  document.getElementById("quizTitle").innerText = level.toUpperCase()+" QUIZ";

  fetch(WEB_APP_URL,{
    method:"POST",
    body:new URLSearchParams({
      action:"generateQuiz",
      workshop:student.singleWorkshop,
      level:level
    })
  })
  .then(r=>r.json())
  .then(d=>{
    questions=d.questions;
    index=0; score=0;
    loadQuestion();
  });
}

function loadQuestion(){
  const q=questions[index];
  document.getElementById("questionBox").innerHTML=`
    <p><b>${q.question}</b></p>
    ${q.options.map((o,i)=>`
      <label>
        <input type="radio" name="opt" value="${i}"> ${o}
      </label><br>`).join("")}`;
  document.getElementById("progress").innerText =
    `Question ${index+1} of 20`;
}

function nextQuestion(){
  const sel=document.querySelector("input[name='opt']:checked");
  if(sel && Number(sel.value)===questions[index].answer) score++;
  index++;
  if(index<20) loadQuestion();
  else showResult();
}

function showResult(){
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  const percent=Math.round(score/20*100);
  document.getElementById("result").innerHTML=`
    <h3>Result</h3>
    <p>Score: ${score}/20</p>
    <p>Percentage: ${percent}%</p>
    ${percent>=50?"<b>ðŸŽ‰ Certificate Eligible</b>":""}`;
}

function logout(){
  localStorage.clear();
  location.href="login.html";
}
</script>

</body>
</html>
